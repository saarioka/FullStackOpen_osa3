{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","newObject","post","obj","delete","concat","id","put","Filter","props","react_default","a","createElement","value","onChange","PersonForm","onSubmit","name","onNameChange","number","onNumberChange","type","Persons","_ref","filter","persons","remove","person","toLowerCase","includes","map","key","onClick","Notification","_ref2","message","className","successful","text","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newFilter","setNewFilter","_useState5","_useState6","newName","setNewName","_useState7","_useState8","newNumber","setNewNumber","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","personService","then","response","data","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","personObject","match","length","window","confirm","catch","setTimeout","p","error","console","log","App_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"qNACMA,EAAU,eAkBDC,EAhBA,WACb,OAAOC,IAAMC,IAAIH,IAeJC,EAZA,SAAAG,GACb,OAAOF,IAAMG,KAAKL,EAASI,IAWdH,EARA,SAAAK,GACb,OAAOJ,IAAMK,OAAN,GAAAC,OAAgBR,EAAhB,KAAAQ,OAA2BF,EAAIG,MAOzBR,EAJA,SAACQ,EAAIL,GAClB,OAAOF,IAAMQ,IAAN,GAAAF,OAAaR,EAAb,KAAAQ,OAAwBC,GAAML,ICbjCO,EAAS,SAACC,GACd,OACEC,EAAAC,EAAAC,cAAA,+BAEMF,EAAAC,EAAAC,cAAA,SACEC,MAAOJ,EAAMI,MACbC,SAAUL,EAAMK,aAMtBC,EAAa,SAACN,GAClB,OACEC,EAAAC,EAAAC,cAAA,QAAMI,SAAUP,EAAMO,UAClBN,EAAAC,EAAAC,cAAA,mBAEEF,EAAAC,EAAAC,cAAA,SACEC,MAAOJ,EAAMQ,KACbH,SAAUL,EAAMS,gBAGpBR,EAAAC,EAAAC,cAAA,qBAEEF,EAAAC,EAAAC,cAAA,SACEC,MAAOJ,EAAMU,OACbL,SAAUL,EAAMW,iBAElBV,EAAAC,EAAAC,cAAA,UAAQS,KAAK,UAAb,UAMJC,EAAU,SAAAC,GAA+B,IAA7BC,EAA6BD,EAA7BC,OAAQC,EAAqBF,EAArBE,QAASC,EAAYH,EAAZG,OAMjC,OALiC,KAAXF,EAClBC,EACAA,EAAQD,OAAO,SAAAG,GAAM,OAAIA,EAAOV,KAAKW,cAC7BC,SAASL,EAAOI,kBAGZE,IAAI,SAAAH,GAAM,OACxBjB,EAAAC,EAAAC,cAAA,MAAImB,IAAKJ,EAAOV,MACbU,EAAOV,KADV,IACiBU,EAAOR,OADxB,IACgCT,EAAAC,EAAAC,cAAA,UAAQoB,QAAS,kBAAMN,EAAOC,KAA9B,cAM9BM,EAAe,SAAAC,GAAiB,IAAdC,EAAcD,EAAdC,QACtB,OAAgB,OAAZA,EACK,KAIPzB,EAAAC,EAAAC,cAAA,OAAKwB,UAAWD,EAAQE,WAAa,UAAY,SAC9CF,EAAQG,OA8HAC,EAzHH,WAAM,IAAAC,EACeC,mBAAS,IADxBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACRf,EADQiB,EAAA,GACCG,EADDH,EAAA,GAAAI,EAEoBL,mBAAS,IAF7BM,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAERE,EAFQD,EAAA,GAEGE,EAFHF,EAAA,GAAAG,EAGgBT,mBAAS,IAHzBU,EAAAR,OAAAC,EAAA,EAAAD,CAAAO,EAAA,GAGRE,EAHQD,EAAA,GAGCE,EAHDF,EAAA,GAAAG,EAIoBb,mBAAS,IAJ7Bc,EAAAZ,OAAAC,EAAA,EAAAD,CAAAW,EAAA,GAIRE,EAJQD,EAAA,GAIGE,EAJHF,EAAA,GAAAG,EAKwBjB,mBAAS,MALjCkB,EAAAhB,OAAAC,EAAA,EAAAD,CAAAe,EAAA,GAKTE,EALSD,EAAA,GAKKE,EALLF,EAAA,GAmBhBG,oBAAU,WACRC,IAEGC,KAAK,SAAAC,GACJpB,EAAWoB,EAASC,SAEzB,IAuED,OACExD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,uBAEAF,EAAAC,EAAAC,cAACuD,EAAD,CAAchC,QAASyB,IAEvBlD,EAAAC,EAAAC,cAACwD,EAAD,CAAQvD,MAASmC,EAAWlC,SA/FL,SAACuD,GAC1BpB,EAAaoB,EAAMC,OAAOzD,UAgGxBH,EAAAC,EAAAC,cAAA,wBAEAF,EAAAC,EAAAC,cAAC2D,EAAD,CACEvD,SAhFa,SAACqD,GAClBA,EAAMG,iBAEN,IAAMC,EAAe,CACnBxD,KAAMmC,EACNjC,OAAQqC,GAGJkB,EAAQjD,EAAQD,OAAO,SAAAG,GAAM,OAAIA,EAAOV,OAASmC,IAEpDsB,EAAMC,OAAS,EACbC,OAAOC,QAAP,GAAAxE,OAAkB+C,EAAlB,6EACDW,EACQW,EAAM,GAAGpE,GAAImE,GACpBT,KAAK,WACJD,IAECC,KAAK,SAAAC,GACJpB,EAAWoB,EAASC,MACpBb,EAAW,IACXI,EAAa,QAGhBqB,MAAM,WACLjB,EAAgB,CAAEvB,KAAI,WAAAjC,OAAc+C,EAAd,qCACJf,YAAa,IAC/B0C,WAAW,WAAQlB,EAAgB,OAAS,KAC5ChB,EAAWpB,EAAQD,OAAO,SAAAwD,GAAC,OAAIA,EAAE1E,KAAOmE,EAAanE,QAGvDuD,EAAgB,CAAEvB,KAAI,UAAAjC,OAAa+C,GAAWf,YAAa,IAC3D0C,WAAW,WACTlB,EAAgB,OACf,MAILE,EACQU,GACPT,KAAK,SAAAC,GACJJ,EAAgB,CAAEvB,KAAI,SAAAjC,OAAY+C,GAAWf,YAAa,IAC1D0C,WAAW,WAAQlB,EAAgB,OAAS,KAE5CR,EAAW,IACXI,EAAa,IACbZ,EAAWpB,EAAQpB,OAAO4D,EAASC,SAGpCY,MAAM,SAAAG,GACLC,QAAQC,IAAIF,EAAMhB,SAASC,MAE3BL,EAAgB,CAAEvB,KAAO2C,EAAMhB,SAASC,KAAKe,MAAO5C,YAAa,IACjE0C,WAAW,WAAQlB,EAAgB,OAAS,QA6B5C5C,KAAMmC,EACNjC,OAAQqC,EACRtC,aAnGmB,SAACmD,GACxBhB,EAAWgB,EAAMC,OAAOzD,QAmGpBO,eAhGqB,SAACiD,GAC1BZ,EAAaY,EAAMC,OAAOzD,UAiGxBH,EAAAC,EAAAC,cAAA,qBAEAF,EAAAC,EAAAC,cAACwE,EAAD,CAAS5D,OAAQwB,EAAWvB,QAASA,EAASC,OA/B5B,SAAC+C,GAClBG,OAAOC,QAAP,UAAAxE,OAAyBoE,EAAaxD,KAAtC,QACD8C,EACQU,GACPT,KAAK,WACJnB,EAAWpB,EAAQD,OAAO,SAAAwD,GAAC,OAAIA,EAAE1E,KAAOmE,EAAanE,QAEvDuD,EAAgB,CAAEvB,KAAI,WAAAjC,OAAcoE,EAAaxD,MAAQoB,YAAa,IACtE0C,WAAW,WAAQlB,EAAgB,OAAS,iBCtJlDwB,IAASC,OAAO5E,EAAAC,EAAAC,cAAC2E,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.6985f20f.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst remove = obj => {\r\n  return axios.delete(`${baseUrl}/${obj.id}`)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  remove: remove,\r\n  update: update \r\n}","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n          filter shown with \r\n          <input \r\n            value={props.value}\r\n            onChange={props.onChange}\r\n          />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PersonForm = (props) => {\r\n  return(\r\n    <form onSubmit={props.onSubmit}>\r\n        <div>\r\n          name:\r\n          <input \r\n            value={props.name}\r\n            onChange={props.onNameChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          number:\r\n          <input \r\n            value={props.number}\r\n            onChange={props.onNumberChange}\r\n          />\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nconst Persons = ({filter, persons, remove}) => {\r\n  const personsToShow = filter === ''\r\n    ? persons\r\n    : persons.filter(person => person.name.toLowerCase()\r\n             .includes(filter.toLowerCase()))\r\n\r\n  return(\r\n    personsToShow.map(person =>\r\n    <li key={person.name}>\r\n      {person.name} {person.number} <button onClick={() => remove(person)}>delete</button>\r\n    </li>\r\n    )\r\n  )\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={message.successful ? \"success\" : \"error\"}>\r\n      {message.text}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newFilter, setNewFilter ] = useState('')\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response.data)\r\n      })\r\n}, [])\r\n\r\n  const addContact = (event) => {\r\n    event.preventDefault()\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n\r\n    const match = persons.filter(person => person.name === newName)\r\n\r\n    if(match.length > 0){\r\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\r\n        personService\r\n        .update(match[0].id, personObject)\r\n        .then(() => {\r\n          personService\r\n          .getAll()\r\n          .then(response => {\r\n            setPersons(response.data)\r\n            setNewName('')\r\n            setNewNumber('')\r\n          })\r\n        })\r\n        .catch(() => {\r\n          setErrorMessage({ text : `Person '${newName}' was already removed from server`,\r\n                            successful : false })\r\n          setTimeout(() => { setErrorMessage(null) }, 3000)\r\n          setPersons(persons.filter(p => p.id !== personObject.id))\r\n        })\r\n        \r\n        setErrorMessage({ text : `Edited ${newName}`, successful : true})\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 3000)\r\n      }\r\n    }\r\n    else{\r\n      personService\r\n      .create(personObject)\r\n      .then(response => {\r\n        setErrorMessage({ text : `Added ${newName}`, successful : true})\r\n        setTimeout(() => { setErrorMessage(null) }, 3000)\r\n\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setPersons(persons.concat(response.data))\r\n\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response.data)\r\n\r\n        setErrorMessage({ text : error.response.data.error, successful : false})\r\n        setTimeout(() => { setErrorMessage(null) }, 3000)\r\n      })\r\n    }\r\n  }\r\n\r\n  const removeContact = (personObject) => {\r\n    if(window.confirm(`Delete ${personObject.name}?`)){\r\n      personService\r\n      .remove(personObject)\r\n      .then(() => {\r\n        setPersons(persons.filter(p => p.id !== personObject.id))\r\n      })\r\n      setErrorMessage({ text : `Removed ${personObject.name}`, successful : true})\r\n      setTimeout(() => { setErrorMessage(null) }, 3000)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notification message={errorMessage}/>\r\n\r\n      <Filter value = {newFilter} onChange={handleFilterChange} />\r\n\r\n      <h3> Add a new</h3>\r\n\r\n      <PersonForm\r\n        onSubmit={addContact}\r\n        name={newName}\r\n        number={newNumber}\r\n        onNameChange={handleNameChange}\r\n        onNumberChange={handleNumberChange}/>\r\n\r\n      <h3>Numbers</h3>\r\n\r\n      <Persons filter={newFilter} persons={persons} remove={removeContact}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}